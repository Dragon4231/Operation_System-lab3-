# Тема: «Синхронизация потоков при помощи критических секций и событий. Обработка тупиков»

**Задача:** Написать программу для консольного процесса, который состоит из потока main и 
нескольких экземпляров потока marker.

**Поток main должен выполнять следующие действия:**
<ul>
  <li>Захватить память под массив целых чисел, размерность которого вводится с консоли.</li>
  <li>Инициализировать элементы массива нулями</li>
  <li>Запросить количество потоков marker, которые требуется запустить.</li>
  <li>Запустить заданное количество экземпляров потока marker. В качестве параметра каждому экземпляру потока marker передать его порядковый номер в запуске.</li>
  <li>Дать сигнал на начало работы всех потоков marker.</li>
  <li> Выполнять в цикле следующие действия:
  <ul>
     <li>Ждать, пока все потоки marker не подадут сигналы о невозможности 
    продолжения своей работы.</li>
    <li>Вывести содержимое массива на консоль.</li>
    <li>Запросить с консоли порядковый номер потока marker, которому будет подан сигнал на завершение своей работы.</li>
    <li>Подать потоку marker, номер которого получен в пункте 6.3, сигнал на завершение работы.</li>
    <li>Ждать завершение работы потока marker, которому был подан сигнал на завершение работы в предыдущем пункте</li>
    <li>Вывести содержимое массива на консоль.</li>
    <li>Подать сигнал на продолжение работы, оставшимся потокам marker.</li>
  </ul>
  </li>
  <li>Завершить свою работу после завершения работы всех потоков marker.</li>
</ul>


**Поток marker должен выполнять следующие действия:**
<ul>
  <li>Начать работу по сигналу от потока main.</li>
  <li>Инициализировать генерацию последовательности случайных чисел. Для этого 
использовать функцию srand, которой передать в качестве аргумента свой 
порядковый номер</li>
  <li> Работать циклически, выполняя на каждом цикле следующие действия:
  <ul>
    <li>Генерировать случайное число, используя функцию rand.</li>
    <li>Разделить это число по модулю на размерность массива.</li>
    <li>Если элемент массива, индекс которого равен результату деления, равен нулю, то выполнить следующие действия:
    <ul>
    <li>Поспать 5 миллисекунд.</li>
    <li>Занести в элемент, индекс которого вычислен, свой порядковый номер.</li>
    <li>Поспать 5 миллисекунд.</li>
    <li>Продолжить исполнение цикла 3.</li>
    </ul>
    </li>
    <li>В противном случае:
    <ul>
    <li>Вывести на консоль следующую информацию: свой порядковый номер, количество помеченных элементов, индекс элемента массива, который невозможно пометить.</li>
    <li>Дать сигнал потоку main на невозможность продолжения своей работы.</li>
    <li>Ждать ответный сигнал на продолжение или завершение работы от потока main.</li>
    </ul>
    </li>
  </ul>
  </li>
  <li>Если получен сигнал на завершение работы, то выполнить следующие действия:
  <ul>
  <li>Заполнить нулями в массиве все элементы, которые он пометил.</li>
  <li>Завершить работу.</li>
  </ul>
  </li>
  <li>Если получен сигнал на продолжение работы, то продолжить исполнение цикла из пункта 3</li>
</ul>
